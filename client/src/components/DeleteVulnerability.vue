<template>
  <div>
 <panel title= "Delete">
<v-btn
      slot="action"
      light
      class="grey darken-1"
      small
      absolute
      left
      middle
      router
      to="/vulnerabilities"
      ><v-icon>arrow_back</v-icon></v-btn
    >
 <h4 class="text-center"> You will delete the following vulnerability :</h4>
    <br>
    <h2 class="text-center font-weight-black"> {{vulnerability.title}}</h2>
    <br>
    <v-btn dark class="grey darken-1" router to='/vulnerabilities'>Cancel</v-btn>
    <v-btn dark class="grey darken-1" @click="deleteVulnerability">Confirm</v-btn>
    </panel>
  </div>
</template>

<script>
import Panel from '@/components/Panel'
import VulnerabilitiesService from '@/services/VulnerabilitiesService'
export default {
  data() {
    return {
      vulnerability: {
        title: null
      },

      error: null,

      required: (value) => !!value || 'Required'
    }
  },

  components: {
    Panel
  },

  methods: {
    async deleteVulnerability() {
      await VulnerabilitiesService.destroy(this.vulnerability)

      this.$router.push({
        name: 'vulnerabilities'
      })
    }
  },

  async mounted() {
    try {
      const vulnerabilityId = this.$store.state.route.params.vulnerabilityId

      this.vulnerability = (
        await VulnerabilitiesService.show(vulnerabilityId)
      ).data
    } catch (err) {
      console.log(err)
    }
  }
}
</script>

<style>
</style>
